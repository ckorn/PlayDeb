#!/usr/bin/make -f

override_dh_auto_configure:
	cmake -DCMAKE_INSTALL_PREFIX=/usr -DCMAKE_VERBOSE_MAKEFILE=ON -DBUILD_SHARED_LIBS=true -DINSTALL_EXTRA_LIBS=true .

override_dh_auto_clean:
	dh_auto_clean

	find . -name CMakeFiles -type d -exec rm -rf {} \; || /bin/true
	find . -name Makefile -type f -exec rm -f {} \; || /bin/true
	find . -name cmake_install.cmake -type f -exec rm -f {} \; || /bin/true

	rm -f CMakeCache.txt install_manifest.txt

override_dh_install:
	# this is not a link but really a library. Move it manually
	# to make the *.so and *.so.* macros in the install files work.
	mv debian/tmp/usr/lib/libOpenGLSupport.so debian/libbullet0/usr/lib
	find debian/tmp -type d -empty -delete
	dh_install

%:
	dh $@
